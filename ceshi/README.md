# å®Œæ•´æ€§æ ¡éªŒç³»ç»Ÿæµ‹è¯•å¥—ä»¶

Integrity Check System Test Suite

## ğŸ“‚ ç›®å½•ç»“æ„

```
ceshi/
â”œâ”€â”€ README.md                    # æœ¬æ–‡ä»¶
â”œâ”€â”€ Makefile                     # ç¼–è¯‘å’Œæµ‹è¯•è„šæœ¬
â”œâ”€â”€ test_integrity_suite.c       # å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼ˆæ­£ç¡®æ€§+æ€§èƒ½æµ‹è¯•ï¼‰
â”œâ”€â”€ generate_test_data.c         # æµ‹è¯•æ•°æ®ç”Ÿæˆå·¥å…·
â””â”€â”€ test_data/                   # æµ‹è¯•æ•°æ®ç›®å½•ï¼ˆè¿è¡Œåç”Ÿæˆï¼‰
    â”œâ”€â”€ README.txt
    â”œâ”€â”€ test_vectors.txt
    â””â”€â”€ *.bin                    # å„ç±»æµ‹è¯•æ•°æ®æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¼–è¯‘æŒ‡ä»¤

**åœ¨Windowsç³»ç»Ÿä¸Š**ï¼ˆå‡è®¾å·²å®‰è£…GCC/MinGWï¼‰ï¼š

```bash
# ç¼–è¯‘æµ‹è¯•å¥—ä»¶
gcc -O3 -pthread -o test_integrity_suite.exe test_integrity_suite.c ../cn_test1.1/test1.1/aes_sm3_integrity.c -lm

# ç¼–è¯‘æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨
gcc -O2 -o generate_test_data.exe generate_test_data.c -lm
```

**åœ¨Linux/ARMå¹³å°ä¸Š**ï¼ˆæ¨èï¼‰ï¼š

```bash
# ç¼–è¯‘æµ‹è¯•å¥—ä»¶ï¼ˆå¸¦ARMä¼˜åŒ–ï¼‰
gcc -march=armv8.2-a+crypto -O3 -pthread -o test_integrity_suite test_integrity_suite.c ../cn_test1.1/test1.1/aes_sm3_integrity.c -lm

# ç¼–è¯‘æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨
gcc -O2 -o generate_test_data generate_test_data.c -lm
```

**ä½¿ç”¨Makefile**ï¼ˆLinux/Unixç³»ç»Ÿï¼‰ï¼š

```bash
make all
```

### è¿è¡Œæµ‹è¯•

```bash
# Windows
test_integrity_suite.exe --all

# Linux
./test_integrity_suite --all
```

## ğŸ“ è¯¦ç»†ç¼–è¯‘è¯´æ˜

### 1. ç¼–è¯‘æµ‹è¯•å¥—ä»¶

**å®Œæ•´å‘½ä»¤**ï¼š
```bash
gcc -march=armv8.2-a+crypto -O3 -pthread \
    -o test_integrity_suite \
    test_integrity_suite.c \
    ../cn_test1.1/test1.1/aes_sm3_integrity.c \
    -lm
```

**å‚æ•°è¯´æ˜**ï¼š
- `-march=armv8.2-a+crypto`: ARMæ¶æ„ä¼˜åŒ–ï¼ˆä»…ARMå¹³å°ï¼‰
- `-O3`: æœ€é«˜çº§åˆ«ä¼˜åŒ–
- `-pthread`: å¯ç”¨å¤šçº¿ç¨‹æ”¯æŒ
- `-lm`: é“¾æ¥æ•°å­¦åº“ï¼ˆç”¨äºsqrtç­‰å‡½æ•°ï¼‰

**Windowsç®€åŒ–ç‰ˆæœ¬**ï¼ˆä¸æ”¯æŒARMä¼˜åŒ–ï¼‰ï¼š
```bash
gcc -O3 -pthread -o test_integrity_suite.exe test_integrity_suite.c ..\cn_test1.1\test1.1\aes_sm3_integrity.c -lm
```

### 2. ç¼–è¯‘æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨

```bash
gcc -O2 -o generate_test_data generate_test_data.c -lm
```

### 3. ç”Ÿæˆæµ‹è¯•æ•°æ®

```bash
# Windows
generate_test_data.exe test_data

# Linux
./generate_test_data test_data
```

è¿™å°†ç”Ÿæˆçº¦12-13MBçš„æµ‹è¯•æ•°æ®åˆ° `test_data/` ç›®å½•ã€‚

## ğŸ§ª æµ‹è¯•é€‰é¡¹

### å®Œæ•´æµ‹è¯•ï¼ˆæ¨èï¼‰

```bash
./test_integrity_suite --all
```

åŒ…å«æ‰€æœ‰æµ‹è¯•é¡¹ç›®ï¼š
- âœ… SM3ç®—æ³•æ ‡å‡†æµ‹è¯•å‘é‡éªŒè¯
- âœ… XORæŠ˜å æ­£ç¡®æ€§æµ‹è¯•
- âœ… å®Œæ•´æ€§æ ¡éªŒç®—æ³•æµ‹è¯•
- âœ… æ‰¹å¤„ç†æ­£ç¡®æ€§æµ‹è¯•
- âœ… å¤šçº¿ç¨‹æ­£ç¡®æ€§æµ‹è¯•
- âš¡ å•å—æ€§èƒ½æµ‹è¯•
- âš¡ å¯¹æ¯”åŸºå‡†æ€§èƒ½æµ‹è¯•
- âš¡ æ‰¹å¤„ç†ä¸å¤šçº¿ç¨‹æ€§èƒ½æµ‹è¯•
- ğŸ” é›ªå´©æ•ˆåº”éªŒè¯

### å¿«é€Ÿæµ‹è¯•ï¼ˆä»…æ­£ç¡®æ€§éªŒè¯ï¼‰

```bash
./test_integrity_suite --quick
```

åªè¿è¡Œæ­£ç¡®æ€§æµ‹è¯•ï¼Œçº¦1åˆ†é’Ÿå®Œæˆã€‚

### æ€§èƒ½æµ‹è¯•

```bash
./test_integrity_suite --performance
```

åªè¿è¡Œæ€§èƒ½æµ‹è¯•ï¼ŒéªŒè¯**10å€äºSHA256**çš„æ€§èƒ½ç›®æ ‡ã€‚

### é›ªå´©æ•ˆåº”æµ‹è¯•

```bash
./test_integrity_suite --avalanche
```

éªŒè¯å¯†ç å­¦é›ªå´©æ•ˆåº”ï¼ˆå•æ¯”ç‰¹å˜åŒ–å¯¼è‡´çº¦50%è¾“å‡ºä½ç¿»è½¬ï¼‰ã€‚

## ğŸ“Š æµ‹è¯•å†…å®¹

### 5.3 ç®—æ³•æ­£ç¡®æ€§æµ‹è¯•

| æµ‹è¯•é¡¹ | æè¿° |
|--------|------|
| 5.3.1 | SM3ç®—æ³•æ ‡å‡†æµ‹è¯•å‘é‡ï¼ˆGB/T 32905-2016ï¼‰ |
| 5.3.2 | XORæŠ˜å æ­£ç¡®æ€§ï¼ˆå…¨0ã€å…¨1ã€éšæœºè¾“å…¥ï¼‰ |
| 5.3.3 | å®Œæ•´æ€§æ ¡éªŒç®—æ³•ï¼ˆ256ä½/128ä½è¾“å‡ºã€ç‰ˆæœ¬ä¸€è‡´æ€§ï¼‰ |
| 5.3.4 | æ‰¹å¤„ç†æ­£ç¡®æ€§ |
| 5.3.5 | å¤šçº¿ç¨‹æ­£ç¡®æ€§ |

### 5.4 æ€§èƒ½æµ‹è¯•

| æµ‹è¯•é¡¹ | æè¿° | ç›®æ ‡ |
|--------|------|------|
| 5.4.1 | å•å—æ€§èƒ½ | æµ‹è¯•v5.0å’Œv6.0ç‰ˆæœ¬ååé‡ |
| 5.4.2 | å¯¹æ¯”åŸºå‡† | **éªŒè¯10å€äºSHA256çš„æ€§èƒ½ç›®æ ‡** |
| 5.4.4 | æ‰¹å¤„ç†&å¤šçº¿ç¨‹ | æµ‹è¯•å¹¶è¡Œå¤„ç†æ€§èƒ½æå‡ |

### 3.6.3 é›ªå´©æ•ˆåº”æµ‹è¯•

- 1000æ¬¡å•æ¯”ç‰¹ç¿»è½¬æµ‹è¯•
- æ±‰æ˜è·ç¦»ç»Ÿè®¡åˆ†æ
- å¡æ–¹æ£€éªŒ
- éªŒè¯ç¿»è½¬ç‡åœ¨45%-55%èŒƒå›´å†…

## ğŸ”§ ç³»ç»Ÿè¦æ±‚

### æ¨èç¯å¢ƒï¼ˆæœ€ä½³æ€§èƒ½ï¼‰

- **ç¡¬ä»¶å¹³å°**: ARMv8.2-Aæˆ–æ›´é«˜ï¼ˆæ”¯æŒcryptoæ‰©å±•ï¼‰
- **æ“ä½œç³»ç»Ÿ**: Linuxï¼ˆUbuntu 20.04+/CentOS 8+ï¼‰
- **ç¼–è¯‘å™¨**: GCC 7.0+
- **ä¾èµ–åº“**: pthread, math library

### Windowsç¯å¢ƒ

- **ç¼–è¯‘å™¨**: MinGW-w64 æˆ– GCC for Windows
- **è¯´æ˜**: ä¸æ”¯æŒARMä¼˜åŒ–ï¼Œæ€§èƒ½æµ‹è¯•ç»“æœä»…ä¾›å‚è€ƒ

### æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æç¤º**ï¼š
1. åœ¨éARM64å¹³å°ä¸Šç¼–è¯‘ä¼šæœ‰è­¦å‘Šï¼ŒæŸäº›ç¡¬ä»¶åŠ é€ŸåŠŸèƒ½å°†æ— æ³•ä½¿ç”¨
2. æ€§èƒ½æµ‹è¯•ç»“æœå› ç¡¬ä»¶é…ç½®è€Œå¼‚
3. å»ºè®®åœ¨çœŸå®ARMç¡¬ä»¶ä¸Šè¿è¡Œä»¥è·å¾—æœ€ä½³æ€§èƒ½å’Œå‡†ç¡®çš„æµ‹è¯•ç»“æœ

## ğŸ“¦ ä½¿ç”¨Makefileï¼ˆLinux/Unixï¼‰

```bash
# ç¼–è¯‘æ‰€æœ‰ç¨‹åºå¹¶ç”Ÿæˆæµ‹è¯•æ•°æ®
make all

# è¿è¡Œæµ‹è¯•
make test-all          # å®Œæ•´æµ‹è¯•
make test-quick        # å¿«é€Ÿæµ‹è¯•
make test-performance  # æ€§èƒ½æµ‹è¯•
make test-avalanche    # é›ªå´©æµ‹è¯•

# æ¸…ç†
make clean             # æ¸…ç†ç¼–è¯‘æ–‡ä»¶
make clean-data        # æ¸…ç†æµ‹è¯•æ•°æ®
make clean-all         # æ¸…ç†æ‰€æœ‰æ–‡ä»¶

# å¸®åŠ©
make help              # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
make info              # æ˜¾ç¤ºå¹³å°ä¿¡æ¯
```

## ğŸ“ˆ æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•å®Œæˆåï¼Œå°†è¾“å‡ºï¼š

### 1. æµ‹è¯•ç»Ÿè®¡
- æ€»æµ‹è¯•æ•°
- é€šè¿‡æ•°é‡å’Œç™¾åˆ†æ¯”
- å¤±è´¥æ•°é‡å’Œç™¾åˆ†æ¯”

### 2. æ€§èƒ½æŒ‡æ ‡
- å„ç®—æ³•ååé‡ï¼ˆMB/sï¼‰
- ä¸åŸºå‡†ç®—æ³•çš„æ€§èƒ½æ¯”è¾ƒ
- **10å€æ€§èƒ½ç›®æ ‡è¾¾æˆæƒ…å†µ** âœ¨

### 3. é›ªå´©æ•ˆåº”åˆ†æ
- å¹³å‡æ±‰æ˜è·ç¦»
- ç¿»è½¬ç‡ï¼ˆç›®æ ‡ï¼š50%ï¼‰
- ç»Ÿè®¡åˆ†æï¼ˆæ–¹å·®ã€æ ‡å‡†å·®ã€ç½®ä¿¡åŒºé—´ï¼‰

## ğŸ› ï¸ æ•…éšœæ’é™¤

### ç¼–è¯‘é”™è¯¯ï¼š"æœªæ‰¾åˆ°aes_sm3_integrity.c"

```bash
# ç¡®ä¿è·¯å¾„æ­£ç¡®ï¼Œæ–‡ä»¶åº”ä½äºï¼š
../cn_test1.1/test1.1/aes_sm3_integrity.c

# æˆ–è€…ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š
gcc ... C:\Users\yuuuu\Desktop\cn_test1.1\test1.1\aes_sm3_integrity.c ...
```

### Windowsä¸Šé“¾æ¥é”™è¯¯

```bash
# ç¡®ä¿å®‰è£…äº†å®Œæ•´çš„MinGWå·¥å…·é“¾
# ä½¿ç”¨-staticæ ‡å¿—é™æ€é“¾æ¥ï¼š
gcc -O3 -pthread -static -o test_integrity_suite.exe ...
```

### æ€§èƒ½æœªè¾¾æ ‡

- âœ… ç¡®è®¤CPUæ”¯æŒARMv8.2-A cryptoæ‰©å±•
- âœ… å…³é—­å…¶ä»–å ç”¨CPUçš„è¿›ç¨‹
- âœ… ä½¿ç”¨ `-O3` ä¼˜åŒ–çº§åˆ«
- âœ… åœ¨ARMå¹³å°ä¸Šæµ‹è¯•

## ğŸ“„ æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ | å¤§å° |
|------|------|------|
| `test_integrity_suite.c` | å®Œæ•´æµ‹è¯•å¥—ä»¶æºä»£ç  | ~31KB |
| `generate_test_data.c` | æµ‹è¯•æ•°æ®ç”Ÿæˆå·¥å…·æºä»£ç  | ~16KB |
| `Makefile` | è‡ªåŠ¨åŒ–ç¼–è¯‘è„šæœ¬ï¼ˆLinux/Unixï¼‰ | ~5KB |
| `README.md` | æœ¬è¯´æ˜æ–‡æ¡£ | ~10KB |

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **ç‰ˆæœ¬**: v1.0
- **æ—¥æœŸ**: 2025-10-22
- **ä½œè€…**: å®Œæ•´æ€§æ ¡éªŒç³»ç»Ÿå¼€å‘å›¢é˜Ÿ

## ğŸ“œ è®¸å¯è¯

æœ¬æµ‹è¯•å¥—ä»¶ä¸å®Œæ•´æ€§æ ¡éªŒç³»ç»Ÿä¸»ç¨‹åºå…±äº«ç›¸åŒè®¸å¯è¯ã€‚

---

**ç¥æµ‹è¯•é¡ºåˆ©ï¼** ğŸ‰

